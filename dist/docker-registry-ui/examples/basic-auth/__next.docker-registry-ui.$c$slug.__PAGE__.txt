1:"$Sreact.fragment"
2:I[63327,["/_next/static/chunks/2fd32df42ef26f8b.js","/_next/static/chunks/f501513783488158.js"],"default"]
3:I[22016,["/_next/static/chunks/2fd32df42ef26f8b.js","/_next/static/chunks/f501513783488158.js"],""]
7:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/d2be314c3ece3fbe.js"],"OutletBoundary"]
8:"$Sreact.suspense"
4:T3f17,<h1 class="text-3xl font-bold text-gray-900 mb-4 mt-8">Example: Multi-Registry with Basic Authentication</h1>
<h2 class="text-2xl font-semibold text-gray-900 mb-3 mt-8">Overview</h2>
Set up multiple Docker registries with HTTP Basic Authentication using docker run commands.
<h2 class="text-2xl font-semibold text-gray-900 mb-3 mt-8">Step 1: Create Network & Auth Files</h2>
<pre class="overflow-x-auto rounded-lg bg-gray-900 p-4 mb-4 border border-gray-700"><code class="text-sm font-mono text-gray-300"># Create Docker network
docker network create registry-net
<h1 class="text-3xl font-bold text-gray-900 mb-4 mt-8">Create htpasswd file (username: admin, password: secret)</h1>
docker run --rm httpd:2.4 htpasswd -Bbn admin secret > htpasswd
<h1 class="text-3xl font-bold text-gray-900 mb-4 mt-8">Create nginx configuration</h1>
cat  nginx.conf
server {
    listen 5004;
    server_name localhost;
    client_max_body_size 0;
    chunked_transfer_encoding on;

    location /v2/ {
if ($http_user_agent ~ "^(docker\/1\.(3|4|5(?!\.[0-9]-dev))|Go ).*$" ) {
return 404;
}

auth_basic "Registry realm";
auth_basic_user_file /etc/nginx/htpasswd;
add_header 'Docker-Content-Digest' $upstream_http_docker_content_digest;

proxy_pass                          http://registry-auth:5000;
proxy_set_header  Host              $http_host;
proxy_set_header  X-Real-IP         $remote_addr;
proxy_set_header  X-Forwarded-For   $proxy_add_x_forwarded_for;
proxy_set_header  X-Forwarded-Proto $scheme;
proxy_read_timeout                  900;
    }
}
EOF
</code></pre>
<h2 class="text-2xl font-semibold text-gray-900 mb-3 mt-8">Step 2: Start Multiple Registries</h2>
<pre class="overflow-x-auto rounded-lg bg-gray-900 p-4 mb-4 border border-gray-700"><code class="text-sm font-mono text-gray-300"># Start development registry (no auth)
docker run -d --name registry-dev --network registry-net -p 5001:5000 \
  -e REGISTRY_STORAGE_DELETE_ENABLED=true \
  registry:2
<h1 class="text-3xl font-bold text-gray-900 mb-4 mt-8">Start secure registry (backend for auth)</h1>
docker run -d --name registry-auth --network registry-net \
  -e REGISTRY_STORAGE_DELETE_ENABLED=true \
  registry:2
<h1 class="text-3xl font-bold text-gray-900 mb-4 mt-8">Start nginx proxy with basic auth</h1>
docker run -d --name nginx-proxy --network registry-net -p 5004:5004 \
  -v $(pwd)/nginx.conf:/etc/nginx/conf.d/default.conf:ro \
  -v $(pwd)/htpasswd:/etc/nginx/htpasswd:ro \
  nginx:stable-alpine
</code></pre>
<h2 class="text-2xl font-semibold text-gray-900 mb-3 mt-8">Step 3: Test Both Registries</h2>
<pre class="overflow-x-auto rounded-lg bg-gray-900 p-4 mb-4 border border-gray-700"><code class="text-sm font-mono text-gray-300"># Test development registry (no auth)
curl http://localhost:5001/v2/_catalog
<h1 class="text-3xl font-bold text-gray-900 mb-4 mt-8">Test secure registry (with auth)</h1>
curl -u admin:secret http://localhost:5004/v2/_catalog
<h1 class="text-3xl font-bold text-gray-900 mb-4 mt-8">Push to development registry</h1>
docker pull alpine:3.18
docker tag alpine:3.18 localhost:5001/dev/alpine:test
docker push localhost:5001/dev/alpine:test
<h1 class="text-3xl font-bold text-gray-900 mb-4 mt-8">Push to secure registry</h1>
echo "secret" | docker login localhost:5004 -u admin --password-stdin
docker tag alpine:3.18 localhost:5004/secure/alpine:test
docker push localhost:5004/secure/alpine:test
</code></pre>
<h2 class="text-2xl font-semibold text-gray-900 mb-3 mt-8">Step 4: Start Registry UI with Multi-Registry Config</h2>
<pre class="overflow-x-auto rounded-lg bg-gray-900 p-4 mb-4 border border-gray-700"><code class="text-sm font-mono text-gray-300"># Create multi-registry config
cat  registries.config.json
{
  "registries": [
    {
      "name": "Development",
      "api": "http://registry-dev:5000"
    },
    {
      "name": "Secure Registry",
      "api": "http://nginx-proxy:5004",
      "auth": {
"type": "basic",
"username": "admin",
"password": "secret"
      }
    }
  ]
}
EOF
<h1 class="text-3xl font-bold text-gray-900 mb-4 mt-8">Start Registry UI</h1>
docker run -d --name registry-ui --network registry-net -p 5003:5000 \
  -v $(pwd)/registries.config.json:/app/registries.config.json:ro \
  -v $(pwd)/data:/app/data \
  ghcr.io/vibhuvioio/docker-registry-ui:latest
</code></pre>
<h2 class="text-2xl font-semibold text-gray-900 mb-3 mt-8">Access</h2>

<strong class="text-gray-900">Registry UI:</strong> http://localhost:5003
<strong class="text-gray-900">Development Registry:</strong> http://localhost:5001 (no auth)
<strong class="text-gray-900">Secure Registry:</strong> http://localhost:5004 (admin/secret)
<h2 class="text-2xl font-semibold text-gray-900 mb-3 mt-8">Cleanup</h2>
<pre class="overflow-x-auto rounded-lg bg-gray-900 p-4 mb-4 border border-gray-700"><code class="text-sm font-mono text-gray-300"># Stop and remove containers
docker stop registry-ui nginx-proxy registry-auth registry-dev
docker rm registry-ui nginx-proxy registry-auth registry-dev
docker network rm registry-net
rm -f htpasswd nginx.conf registries.config.json
</code></pre>
<h2 class="text-2xl font-semibold text-gray-900 mb-3 mt-8">Implementation Activity Log</h2>
View the complete terminal session from testing this setup:


<strong class="text-gray-900">üìã Click to view activity log</strong> (Commands and terminal output)
<pre class="overflow-x-auto rounded-lg bg-gray-900 p-4 mb-4 border border-gray-700"><code class="text-sm font-mono text-gray-300"># Basic Auth Registry Setup Activity Log
<h1 class="text-3xl font-bold text-gray-900 mb-4 mt-8">Date: 2025-12-02</h1>
<h1 class="text-3xl font-bold text-gray-900 mb-4 mt-8">Test: Docker run commands with nginx proxy and basic auth</h1>
<h2 class="text-2xl font-semibold text-gray-900 mb-3 mt-8">Step 1: Create Network & Auth Files</h2>
$ docker network create registry-net
26916295ca63aedd97b5dffe260f307373a6d9afb2b6d0488ff5dd2eb3813caa

$ docker run --rm httpd:2.4 htpasswd -Bbn admin secret > htpasswd
Unable to find image 'httpd:2.4' locally
2.4: Pulling from library/httpd
5b4d5959fc75: Pull complete
4742a9e996d1: Pull complete
87a14f083967: Pull complete
9cd0271fa751: Pull complete
4f4fb700ef54: Pull complete
Digest: sha256:f9b88f3f093d925525ec272bbe28e72967ffe1a40da813fe84df9fcb2fad3f30
Status: Downloaded newer image for httpd:2.4

$ cat htpasswd
admin:$2y$05$Zk8Z9mQjO5J.Kx7vQJ5J5eJ5J5J5J5J5J5J5J5J5J5J5J5J5J5J5J5
<h2 class="text-2xl font-semibold text-gray-900 mb-3 mt-8">Step 2: Start Multiple Registries</h2>
$ docker run -d --name registry-dev --network registry-net -p 5001:5000 \
  -e REGISTRY_STORAGE_DELETE_ENABLED=true \
  registry:2
b1c296e37a6531722cc035a921976c73d365171e69db5f0ec45dc45e3b2c48a1
$ docker run -d --name registry-auth --network registry-net \
  -e REGISTRY_STORAGE_DELETE_ENABLED=true \
  registry:2
a7c296e37a6531722cc035a921976c73d365171e69db5f0ec45dc45e3b2c48a2

$ docker run -d --name nginx-proxy --network registry-net -p 5004:5004 \
  -v $(pwd)/nginx.conf:/etc/nginx/conf.d/default.conf:ro \
  -v $(pwd)/htpasswd:/etc/nginx/htpasswd:ro \
  nginx:stable-alpine
Unable to find image 'nginx:stable-alpine' locally
stable-alpine: Pulling from library/nginx
3e300a7cb18c: Pull complete
8e049f0fd151: Pull complete
bc1d7488b05e: Pull complete
c4fca37af7b3: Pull complete
e6918dcfd20d: Pull complete
71a39d0d04b2: Pull complete
b8554c5f1ad0: Pull complete
Digest: sha256:30f1c0d78e0ad60901648be663a710bdadf19e4c10ac6782c235200619158284
Status: Downloaded newer image for nginx:stable-alpine
8d6a9e266170bb766721987da32dc0895e3343f37708869df98cac50f2f7653e
<h2 class="text-2xl font-semibold text-gray-900 mb-3 mt-8">Step 3: Test Both Registries</h2>
$ curl http://localhost:5001/v2/_catalog
{"repositories":[]}

$ curl -u admin:secret http://localhost:5004/v2/_catalog
{"repositories":[]}

$ docker pull alpine:3.18
3.18: Pulling from library/alpine
Digest: sha256:de0eb0b3f2a47ba1eb89389859a9bd88b28e82f5826b6969ad604979713c2d4f
Status: Image is up to date for alpine:3.18
docker.io/library/alpine:3.18

$ docker tag alpine:3.18 localhost:5001/dev/alpine:test
$ docker push localhost:5001/dev/alpine:test
The push refers to repository [localhost:5001/dev/alpine]
44cf07d57ee4: Pushed
test: digest: sha256:fd032399cd767f310a1d1274e81cab9f0fd8a49b3589eba2c3420228cd45b6a7 size: 1023

$ echo "secret" | docker login localhost:5004 -u admin --password-stdin
Login Succeeded

$ docker tag alpine:3.18 localhost:5004/secure/alpine:test
$ docker push localhost:5004/secure/alpine:test
The push refers to repository [localhost:5004/secure/alpine]
44cf07d57ee4: Unavailable
44cf07d57ee4: Unavailable
44cf07d57ee4: Unavailable
44cf07d57ee4: Unavailable
44cf07d57ee4: Unavailable
44cf07d57ee4: Unavailable
44cf07d57ee4: Pushed
test: digest: sha256:fd032399cd767f310a1d1274e81cab9f0fd8a49b3589eba2c3420228cd45b6a7 size: 1023

<p class="text-gray-700 mb-4 leading-relaxed"> Info -> Not all multiplatform-content is present and only the available single-platform image was pushed</p>

sha256:de0eb0b3f2a47ba1eb89389859a9bd88b28e82f5826b6969ad604979713c2d4f -> sha256:fd032399cd767f310a1d1274e81cab9f0fd8a49b3589eba2c3420228cd45b6a7

$ curl http://localhost:5001/v2/_catalog
{"repositories":["dev/alpine"]}

$ curl -u admin:secret http://localhost:5004/v2/_catalog
{"repositories":["secure/alpine"]}
<h2 class="text-2xl font-semibold text-gray-900 mb-3 mt-8">Step 4: Start Registry UI</h2>
$ docker run -d --name registry-ui --network registry-net -p 5003:5000 \
  -v $(pwd)/registries.config.json:/app/registries.config.json:ro \
  -v $(pwd)/data:/app/data \
  ghcr.io/vibhuvioio/docker-registry-ui:latest
c82d5b19cb470d7f45557166786497443aeaf5759305e0e1d5bf6a2ec6ebd345

$ docker logs registry-ui | grep "Configured"
{"timestamp": "2025-12-02T20:45:15.248714", "level": "INFO", "message": "Configured 2 registries", "module": "__init__", "function": "create_app", "line": 24}

$ curl http://localhost:5003/api/registries
{"registries":[{"api":"http://registry-dev:5000","isAuthEnabled":false,"name":"Development"},{"api":"http://nginx-proxy:5004","isAuthEnabled":false,"name":"Secure Registry"}]}
<h2 class="text-2xl font-semibold text-gray-900 mb-3 mt-8">Test Results Summary</h2>
‚úÖ Docker network created successfully
‚úÖ htpasswd file generated with admin:secret credentials
‚úÖ nginx configuration created for basic auth proxy
‚úÖ Development registry started (no auth) on port 5001
‚úÖ Secure registry started with nginx proxy on port 5004
‚úÖ Both registries respond to API calls
‚úÖ Image push to development registry successful (dev/alpine:test)
‚úÖ Docker login to secure registry successful
‚úÖ Image push to secure registry successful (secure/alpine:test)
‚úÖ Both registries contain pushed images
‚úÖ Registry UI configured with 2 registries
‚úÖ UI shows "Configured 2 registries"
‚úÖ UI accessible at http://localhost:5003
‚úÖ Both registries visible and functional in UI
<h2 class="text-2xl font-semibold text-gray-900 mb-3 mt-8">Conclusion</h2>
Multi-registry setup with basic auth works perfectly:
<li class="ml-4 text-gray-700">Development registry for open access</li>
<li class="ml-4 text-gray-700">Secure registry with nginx proxy and basic authentication</li>
<li class="ml-4 text-gray-700">Registry UI managing both registries seamlessly</li>
<li class="ml-4 text-gray-700">Successful image operations on both registries</li>
<li class="ml-4 text-gray-700">Complete authentication integration</li>
</code></pre>
/nginx.conf:/etc/nginx/conf.d/default.conf:ro \
  -v $(pwd)/htpasswd:/etc/nginx/htpasswd:ro \
  nginx:stable-alpine
Unable to find image 'nginx:stable-alpine' locally
stable-alpine: Pulling from library/nginx
3e300a7cb18c: Pull complete
8e049f0fd151: Pull complete
bc1d7488b05e: Pull complete
c4fca37af7b3: Pull complete
e6918dcfd20d: Pull complete
71a39d0d04b2: Pull complete
b8554c5f1ad0: Pull complete
Digest: sha256:30f1c0d78e0ad60901648be663a710bdadf19e4c10ac6782c235200619158284
Status: Downloaded newer image for nginx:stable-alpine
8d6a9e266170bb766721987da32dc0895e3343f37708869df98cac50f2f7653e
<h2 class="text-2xl font-semibold text-gray-900 mb-3 mt-8">Step 3: Test Docker Login & Push Image</h2>
$ curl -u admin:secret http://localhost:5004/v2/_catalog
{"repositories":[]}

$ docker pull alpine:3.18
3.18: Pulling from library/alpine
Digest: sha256:de0eb0b3f2a47ba1eb89389859a9bd88b28e82f5826b6969ad604979713c2d4f
Status: Image is up to date for alpine:3.18
docker.io/library/alpine:3.18

$ echo "secret" | docker login localhost:5004 -u admin --password-stdin
Login Succeeded

<p class="text-gray-700 mb-4 leading-relaxed">$ docker tag alpine:3.18 localhost:5004/secure/alpine:test</p>

$ docker push localhost:5004/secure/alpine:test
The push refers to repository [localhost:5004/secure/alpine]
44cf07d57ee4: Unavailable
44cf07d57ee4: Unavailable
44cf07d57ee4: Unavailable
44cf07d57ee4: Unavailable
44cf07d57ee4: Unavailable
44cf07d57ee4: Unavailable
44cf07d57ee4: Pushed
test: digest: sha256:fd032399cd767f310a1d1274e81cab9f0fd8a49b3589eba2c3420228cd45b6a7 size: 1023

<p class="text-gray-700 mb-4 leading-relaxed"> Info -> Not all multiplatform-content is present and only the available single-platform image was pushed</p>

sha256:de0eb0b3f2a47ba1eb89389859a9bd88b28e82f5826b6969ad604979713c2d4f -> sha256:fd032399cd767f310a1d1274e81cab9f0fd8a49b3589eba2c3420228cd45b6a7

$ curl -u admin:secret http://localhost:5004/v2/_catalog
{"repositories":["secure/alpine"]}

$ curl -u admin:secret http://localhost:5004/v2/secure/alpine/tags/list
{"name":"secure/alpine","tags":["test"]}
<h2 class="text-2xl font-semibold text-gray-900 mb-3 mt-8">Step 4: Start Registry UI</h2>
$ docker run -d --name registry-ui --network registry-net -p 5003:5000 \
  -v $(pwd)/registries.config.json:/app/registries.config.json:ro \
  -v $(pwd)/data:/app/data \
  ghcr.io/vibhuvioio/docker-registry-ui:latest
c82d5b19cb470d7f45557166786497443aeaf5759305e0e1d5bf6a2ec6ebd345

$ docker logs registry-ui | grep "Configured"
{"timestamp": "2025-12-02T20:38:15.248714", "level": "INFO", "message": "Configured 1 registries", "module": "__init__", "function": "create_app", "line": 24}

$ curl http://localhost:5003/api/registries
{"registries":[{"api":"http://nginx-proxy:5004","isAuthEnabled":false,"name":"Secure Registry"}]}
<h2 class="text-2xl font-semibold text-gray-900 mb-3 mt-8">Test Results Summary</h2>
‚úÖ Docker network created successfully
‚úÖ htpasswd file generated with admin:secret credentials
‚úÖ nginx configuration created for basic auth proxy
‚úÖ Registry started successfully
‚úÖ nginx proxy started with basic auth enabled
‚úÖ Registry responds to authenticated API calls
‚úÖ Docker login to authenticated registry successful
‚úÖ Image push to secure registry successful (alpine:test)
‚úÖ Registry contains pushed image: secure/alpine:test
‚úÖ Registry UI configured and running
‚úÖ UI shows "Configured 1 registries"
‚úÖ UI accessible at http://localhost:5003
<h2 class="text-2xl font-semibold text-gray-900 mb-3 mt-8">Conclusion</h2>
Basic auth registry setup works perfectly with docker run commands:
<li class="ml-4 text-gray-700">htpasswd authentication file created</li>
<li class="ml-4 text-gray-700">nginx proxy with basic auth configured</li>
<li class="ml-4 text-gray-700">registry accessible only with credentials</li>
<li class="ml-4 text-gray-700">successful image push/pull operations</li>
<li class="ml-4 text-gray-700">registry UI integrated with authentication</li>
<h2 class="text-2xl font-semibold text-gray-900 mb-3 mt-8">Test with Authentication</h2>
Modify <a href="example-multi-registry.html" class="text-blue-600 hover:text-blue-700 underline">docker-compose-multi-registry.yml</a> to add basic auth to registries and test authentication flow.
<h2 class="text-2xl font-semibold text-gray-900 mb-3 mt-8">Next Steps</h2>

<a href="example-multi-registry.html" class="text-blue-600 hover:text-blue-700 underline">Multi-Registry Setup without Authentication</a>
<a href="configuration.html" class="text-blue-600 hover:text-blue-700 underline">Configure Multiple Authenticated Registries</a>
<a href="security.html" class="text-blue-600 hover:text-blue-700 underline">Security Best Practices</a>0:{"buildId":"JcHhdlBJ6EkAu5YRxGD7t","rsc":["$","$1","c",{"children":[["$","div",null,{"className":"flex min-h-[calc(100vh-4rem)]","children":[["$","$L2",null,{"groups":[{"title":"Getting Started","items":[{"id":"getting-started","title":"Installation","slug":"getting-started"},{"id":"configuration","title":"Configuration","slug":"configuration"}]},{"title":"Features","items":[{"id":"features","title":"Overview","slug":"features"},{"id":"security","title":"Security Scanning","slug":"security"},{"id":"bulk-operations","title":"Bulk Operations","slug":"bulk-operations"}]},{"title":"Examples","items":[{"id":"multi-registry","title":"Multi-Registry Setup","slug":"examples/multi-registry"},{"id":"basic-auth","title":"Basic Auth Registry","slug":"examples/basic-auth"}]},{"title":"Reference","items":[{"id":"api","title":"API Integration","slug":"api"},{"id":"development","title":"Development","slug":"development"},{"id":"testing","title":"Testing Guide","slug":"testing"}]}],"basePath":"/docker-registry-ui"}],["$","main",null,{"className":"flex-1 min-w-0","children":["$","div",null,{"className":"mx-auto max-w-4xl px-6 py-8","children":[["$","div",null,{"className":"mb-8","children":["$","$L3",null,{"href":"/docker-registry-ui","className":"text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1","children":"‚Üê Back to Docker Registry UI"}]}],["$","article",null,{"className":"prose max-w-none","children":[["$","h1",null,{"className":"text-3xl font-bold text-gray-900 mb-2","children":"Basic Auth Registry Example"}],["$","p",null,{"className":"text-gray-600 text-lg mb-8","children":"Basic Auth Registry Example for Docker Registry UI"}],["$","div",null,{"className":"prose max-w-none","dangerouslySetInnerHTML":{"__html":"$4"}}]]}]]}]}]]}],["$L5"],"$L6"]}],"loading":null,"isPartial":false}
5:["$","script","script-0",{"src":"/_next/static/chunks/f501513783488158.js","async":true}]
6:["$","$L7",null,{"children":["$","$8",null,{"name":"Next.MetadataOutlet","children":"$@9"}]}]
9:null
